# 시큐어코딩의 개요

## 소프트웨어 개발보안의 필요성 - 웹공격 경로

1. 외부 -> 웹서버

2. 서버의 내부 사용자가 외부에 접근할 때 외부에서 악성코드를 심어 놓고 내부사용자가 되돌아가서 내부의 시스템을 사용할 때 악성코드를 퍼뜨리는 방식



## 소프트웨어 개발보안의 필요성 - 침해사고 발생빈도

### 클라이언트

- DLP(Data Loss Prevention) - 데이터 누수 방지
- DRM(Digital Right Management) -  저작권자가 배포한 디지털 자료나 하드웨어의 사용을 제한하는 것



### 네트워크 단

- 1차 방화벽
- 2차 IDS/IPS

- 3차 웹 방화벽



### 웹서버

- 보안 프로그램 설치



### 애플리케이션 중요도(***)

- 가장 침해사고 발생빈도가 높음



## 파일 업로드 취약점(개인정보유출의 가장 많은 부분을 차지***)

- 파일 업로드 기능을 제고하는 사이트에서 업로드 파일의 크기와 개수를 제한하지 않음

  ⇒서버의 연결 및 디스크 자원을 고갈시킨다.  

  정상적인 서비스를 방해 ⇒ DoS

- 업로드 파일의 종류를 제한하지 않음

  ⇒서버에서 실행 가능한 웹쉘(WebShell) 파일을 업로드 후 해당 파일을 실행해서 서버의 제어권을 탈취

- 외부에서 접근 가능한 경로에 파일을 저장하는 경우에 발생하는 취약점

  ⇒악성코드가 포함된 실행파일을 업로드 후 불특정 다수가 다운로드하도록 유도 ⇒ 악성코드 유포지로 악용



## 파일 업로드 취약점 해결방법

1. 업로드 파일의 크기와 개수를 제한

2. 업로드 파일의 종류를 제한

3. 외부에서 접근할 수 없는 경로에 업로드 파일을 저장

4. 업로드 파일의 저장 경로와 파일명을 외부에서 알 수 없도록 한다.

5. 업로드 파일의 실행 속성을 제거한 후 저장한다.



#SSL = TLS



## 취약점 DB

1) CWE

2) CVE

3) SANS Top 25

4) OWASP Top 10



### 이스케이프

- SQL문 예약어 또는 특수기호 ⇒ 메타문자(어떤 기능에서 의미를 가지고 있는 문자)

- 메타문자(의미문자)에서 의미를 제거하고 문자만 남기는 것



### SANS Top 25

- 구성요소 간 안전하지 않은 상호작용(6개 취약점)

  - <B>1위</B> -  SQL Injection 

    - 외부 입력값을 쿼리 조작 문자열 포함 여부를 확인하지 않고, 쿼리 생성 및 실행에 사용하는 경우 발생

      → 원리 의미와 다른 형태로 쿼리가 변형되어서 실행되는 것 

  - <B>2위</B> -  Command Injection

    - 운영체제 명령어 실행 부분이 존재하는 경우, 외부 입력값을 검증, 제한하지 않고, 명령어 또는 명령어의 일부로 사용하는 경우 발생

      → 의도하지 않은 추가 명령어 실행이 가능

  - <B>4위</B> - 크로스 사이트 스크립팅XSS(Cross-site Scripting)

    - 공격자가 전달한 스크립트 코드가 사용자 브라우저를 통해서 실행되는 것
  
    - 1) 저장 XSS (Stored)

    - 2) 반사 XSS (Reflective)

      - 피해

        1) 희생자 브라우저 또는 PC의 정보를 탈취
  
        2) 가짜 페이지를 만들어 사용자로 하여금 입력을 유도해서 입력 정보를 탈취
  
        3) 원격지에서 해당 PC를 제어 = 좀비화 ⇒ BeEF
  
  - <B>12위</B> - 크로스 사이트 요청위조CSRF(Cross-Site Request Forgery)
  
    - 요청을 받은 서버측 프로그램이, 요청 주체와 요청 절차를 검증하지 않고 요청을 처리했을 때 발생
  
    - ex)
    - ![1565250068255](C:\Users\student\AppData\Roaming\Typora\typora-user-images\1565250068255.png)
      - CSP(Content Security Policy)
        - Content-Security-Policy 헤더를 사용해서 정책을 실행하게 설정하는 것입니다.
    
  - <B>22위</B> - Open Redirect
  
    - 신뢰되지 않은 URL 주소로 자동 접속 연결
  
    - 외부 입력값을 검증, 제한 없이 리다이렉트 주소로 사용하는 경우 발생
  
      ⇒ 의도하지 않은(계획되지 않은) 외부 사이트로 리다이렉션이 발생할 수 있음
  
      ⇒ 피싱과 같은 공격에 악용

![1565313341100](C:\Users\student\AppData\Roaming\Typora\typora-user-images\1565313341100.png)

![1565313355512](C:\Users\student\AppData\Roaming\Typora\typora-user-images\1565313355512.png)